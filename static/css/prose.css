/* ============================================
   PROSE.CSS - Single Post Styling
   Warm Editorial Design System
   ============================================ */

/* ─── 1. Post Layout (sidebar + content) ─── */
.post-layout {
	display: grid;
	grid-template-columns: var(--gutter-width) 1fr;
	gap: var(--content-gap);
	max-width: var(--max-width);
	margin: 0 auto;
	padding: 4rem var(--page-padding);
}

.post-sidebar {
	/* No sticky per context decision */
}

.sidebar-section {
	margin-bottom: 2rem;
}

.sidebar-label {
	font-family: var(--font-display);
	font-size: 0.75rem;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.1em;
	color: var(--ink-light);
	margin-bottom: 0.75rem;
}

.post-sidebar .post-date {
	font-size: 0.9rem;
	color: var(--ink-light);
	font-variant-numeric: tabular-nums;
}

.post-sidebar .sidebar-tags {
	display: flex;
	flex-direction: column;
	gap: 0.5rem;
}

/* Reuse tag-chip from home.css, ensure available */
.post-sidebar .tag-chip {
	align-self: flex-start;
}

.post-content {
	max-width: var(--prose-max-width);
}

/* ─── 2. Post Title ─── */
.post-content .post-title {
	font-family: var(--font-display);
	font-size: clamp(2rem, 4vw + 1rem, 2.75rem);
	font-weight: 800;
	line-height: 1.15;
	letter-spacing: -0.02em;
	margin-bottom: 2rem;
	color: var(--ink);
}

/* ─── 3. Prose Typography with clamp() ─── */
.post-content {
	font-family: var(--font-body);
	font-size: 1.05rem;
	line-height: 1.75;
	color: var(--ink);
}

.post-content h2 {
	font-family: var(--font-display);
	font-size: clamp(1.5rem, 3vw + 0.5rem, 2rem);
	font-weight: 600;
	line-height: 1.25;
	margin-block: 2.5rem 1rem;
}

.post-content h3 {
	font-family: var(--font-display);
	font-size: clamp(1.25rem, 2vw + 0.5rem, 1.5rem);
	font-weight: 600;
	line-height: 1.3;
	margin-block: 2rem 0.75rem;
}

.post-content h4 {
	font-family: var(--font-display);
	font-size: 1.15rem;
	font-weight: 600;
	line-height: 1.4;
	margin-block: 1.5rem 0.5rem;
}

.post-content p {
	margin-block: 1.25rem;
}

/* ─── 4. Blockquotes (SNGL-06) ─── */
.post-content blockquote {
	border-left: 4px solid var(--accent);
	margin-block: 1.5rem;
	margin-left: 0;
	padding-left: 1.5rem;
	font-style: italic;
	color: var(--ink-light);
}

.post-content blockquote p {
	margin-block: 0.75rem;
}

/* ─── 5. Inline Code (SNGL-07) ─── */
.post-content :not(pre) > code {
	background: var(--warm-bg-deep);
	border: 1px solid var(--border);
	border-radius: 4px;
	padding: 0.15em 0.4em;
	font-family: var(--font-code);
	font-size: 0.9em;
	color: var(--accent-hover);
}

/* ─── 6. Lists (SNGL-08) ─── */
.post-content ul,
.post-content ol {
	margin-block: 1.25rem;
	padding-left: 1.5rem;
}

.post-content li {
	margin-block: 0.5rem;
}

.post-content li::marker {
	color: var(--accent);
}

.post-content li > ul,
.post-content li > ol {
	margin-block: 0.5rem;
}

/* ─── 7. Images (SNGL-09) ─── */
.post-content img {
	margin-block: 2rem;
	border-radius: 8px;
	border: 1px solid var(--border);
}

/* ─── 8. Horizontal Rules ─── */
.post-content hr {
	border: none;
	border-top: 1px solid var(--border);
	margin-block: 2.5rem;
}

/* ─── 9. Code Blocks with Syntax Highlighting (SNGL-03) ─── */

/* Code block container */
pre[class*='language-'] {
	background: var(--warm-bg-deep);
	border: 1px solid var(--border);
	border-radius: 8px;
	padding: 1.5rem;
	padding-left: 3.5rem;
	overflow-x: auto;
	font-family: var(--font-code);
	font-size: 0.9rem;
	line-height: 1.6;
	position: relative;
	margin-block: 2rem;
}

code[class*='language-'] {
	font-family: var(--font-code);
	color: var(--ink);
}

/* Language label in corner */
pre[class*='language-']::before {
	content: attr(data-language);
	position: absolute;
	top: 0.5rem;
	right: 0.75rem;
	font-size: 0.7rem;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	color: var(--ink-light);
	opacity: 0.5;
	font-family: var(--font-body);
}

/* Line numbers */
pre.line-numbers .line-numbers-rows {
	position: absolute;
	top: 1.5rem;
	left: 0;
	width: 3rem;
	border-right: 1px solid var(--border);
	pointer-events: none;
	user-select: none;
	counter-reset: linenumber;
}

pre.line-numbers .line-numbers-rows > span {
	display: block;
	counter-increment: linenumber;
	line-height: 1.6;
}

pre.line-numbers .line-numbers-rows > span::before {
	content: counter(linenumber);
	color: var(--syntax-comment);
	font-size: 0.85em;
	text-align: right;
	display: block;
	padding-right: 0.75rem;
}

/* ─── 10. Syntax Highlighting Tokens - Warm Editorial Palette ─── */
.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: var(--syntax-comment);
	font-style: italic;
}

.token.punctuation {
	color: var(--syntax-punctuation);
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: var(--syntax-property);
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: var(--syntax-at-rule);
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: var(--syntax-selector);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: var(--syntax-value);
}

.token.function,
.token.class-name {
	color: var(--accent);
}

.token.regex,
.token.important,
.token.variable {
	color: var(--accent-hover);
}

.token.important,
.token.bold {
	font-weight: 600;
}

.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}

/* ─── 11. Mobile Responsive (RESP-05) ─── */
@media (width < 768px) {
	.post-layout {
		grid-template-columns: 1fr;
		gap: 1.5rem;
		padding: 2rem var(--page-padding);
	}

	.post-sidebar {
		display: flex;
		gap: 2rem;
		padding-bottom: 1.5rem;
		border-bottom: 1px solid var(--border);
		margin-bottom: 1rem;
	}

	.sidebar-section {
		margin-bottom: 0;
	}

	.post-sidebar .sidebar-tags {
		flex-direction: row;
		flex-wrap: wrap;
	}

	.post-content .post-title {
		margin-bottom: 1.5rem;
	}

	pre[class*='language-'] {
		font-size: 0.85rem;
		padding: 1rem;
		padding-left: 3rem;
		border-radius: 4px;
	}

	pre.line-numbers .line-numbers-rows {
		top: 1rem;
		width: 2.5rem;
	}
}
