{
	"_id": "_design/byTag",
	"_rev": "15-eb783f68528801e0324c7cae7d05449d",
	"language": "javascript",
	"views": {
		"byTag": {
			"map": "function(doc) {
				if (doc.tags.length) {
					emit(doc.tags, doc);
				}
			}"
		},
		"byDate": {
			"map": "function(doc) {
				var ts = new Date(doc.timestamp),
						dateArr = [ts.getFullYear(), ts.getMonth() + 1, ts.getDate(), ts.getHours(), ts.getMinutes()],
						l = doc.tags.length;
				while(l--) {
					emit([doc.tags[l], dateArr], doc);
				}
			}"
		}
	}
}
